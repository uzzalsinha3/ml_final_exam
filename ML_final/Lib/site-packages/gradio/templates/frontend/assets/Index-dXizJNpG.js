import"./svelte/svelte_internal_flags_async.js";import*as e from"./svelte/svelte_internal_client.js";import"./i18n-BldJSFLV.js";import{G as ue}from"./utils.svelte-Ceck75cM.js";import{onMount as de,tick as ce}from"./svelte/svelte_svelte.js";import{t as C}from"./tinycolor-CTCHxbWk.js";import{e as _e,p as ve,B as pe}from"./IconButtonWrapper-Cljb5D-5.js";import"./svelte/svelte_internal_flags_legacy.js";import{S as me}from"./StreamingBar-b2qVLPYU.js";import{default as We}from"./Example-DQetu39U.js";import"./svelte/svelte_store.js";import"./index-Ds2meNS5.js";import"./svelte/svelte_animate.js";import"./svelte/svelte_attachments.js";import"./svelte/svelte_easing.js";import"./svelte/svelte_internal_flags_tracing.js";import"./svelte/svelte_internal_server.js";import"./svelte/svelte_legacy.js";import"./svelte/svelte_motion.js";import"./svelte/svelte_reactivity.js";import"./svelte/svelte_reactivity_window.js";import"./svelte/svelte_server.js";import"./svelte/svelte_transition.js";import"./svelte/svelte_events.js";import"./MarkdownCode-C2b9iIxl.js";import"./prism-python-CpYAgONt.js";function he(u,n){const o=t=>{u&&!u.contains(t.target)&&!t.defaultPrevented&&n(t)};return document.addEventListener("mousedown",o,!0),{destroy(){document.removeEventListener("mousedown",o,!0)}}}function O(u){const n=u.s,o=u.v;let t=n*o;const _=u.h/60;let d=t*(1-Math.abs(_%2-1));const c=o-t;t=t+c,d=d+c;const v=Math.floor(_)%6,p=[t,d,c,c,d,t][v],m=[d,t,t,d,c,c][v],l=[c,c,d,t,t,d][v];return`rgba(${p*255}, ${m*255}, ${l*255}, ${u.a})`}function fe(u,n){return n==="hex"?C(u).toHexString():n==="rgb"?C(u).toRgbString():C(u).toHslString()}var be=e.from_html("<button> </button>"),ge=e.from_html('<div class="color-picker svelte-nbn1m9"><div class="color-gradient svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="hue-slider svelte-nbn1m9"><div class="marker svelte-nbn1m9"></div></div> <div class="input svelte-nbn1m9"><button class="swatch svelte-nbn1m9"></button> <div><div class="input-wrap svelte-nbn1m9"><input type="text" class="svelte-nbn1m9"/> <button class="eyedropper svelte-nbn1m9"><!></button></div> <div class="buttons svelte-nbn1m9"></div></div></div></div>'),we=e.from_html('<!> <button class="dialog-button svelte-nbn1m9"></button> <!>',1);function xe(u,n){e.push(n,!0);let o=e.prop(n,"value",15),t=e.prop(n,"on_input",3,()=>{});e.prop(n,"on_submit",3,()=>{}),e.prop(n,"on_blur",3,()=>{}),e.prop(n,"on_focus",3,()=>{});let _=e.state(!1),d=e.state("hex"),c=!1,v,p,m=[0,0],l=null,f=!1,b=[0,0],x=0,E=0,h=null,B=!1;function Q(r){h=r.currentTarget.getBoundingClientRect(),B=!0,X(r.clientX)}function X(r){if(!h)return;const s=Math.max(0,Math.min(r-h.left,h.width));E=s;const a=s/h.width*360;x=a,o(O({h:a,s:b[0],v:b[1],a:1})),t()()}function D(r,s){if(!l)return;const a=Math.max(0,Math.min(r-l.left,l.width)),g=Math.max(0,Math.min(s-l.top,l.height));m=[a,g];const w={h:x*1,s:a/l.width,v:1-g/l.height,a:1};b=[w.s,w.v],o(O(w)),t()()}function U(r){f=!0,l=r.currentTarget.getBoundingClientRect(),D(r.clientX,r.clientY)}function V(r){f&&D(r.clientX,r.clientY),B&&X(r.clientX)}function W(){f=!1,B=!1}async function G(r){if(f||B||(await ce(),!r)||(!l&&v&&(l=v.getBoundingClientRect()),!h&&p&&(h=p.getBoundingClientRect()),!l||!h))return;const s=C(r).toHsv(),a=s.s*l.width,g=(1-s.v)*l.height;m=[a,g],b=[s.s,s.v],x=s.h,E=s.h/360*h.width}function Z(){new EyeDropper().open().then(s=>{o(s.sRGBHex)}),t()()}const ee=[["Hex","hex"],["RGB","rgb"],["HSL","hsl"]];let P=e.derived(()=>fe(o(),e.get(d)));de(async()=>{c=window!==void 0&&!!window.EyeDropper});function te(){e.set(_,!1)}e.user_effect(()=>{G(o())});var T=we();e.event("mousemove",e.window,V),e.event("mouseup",e.window,W);var L=e.first_child(T);_e(L,{get show_label(){return n.show_label},get info(){return n.info},children:(r,s)=>{e.next();var a=e.text();e.template_effect(()=>e.set_text(a,n.label)),e.append(r,a)},$$slots:{default:!0}});var M=e.sibling(L,2);let Y;var re=e.sibling(M,2);{var ne=r=>{var s=ge(),a=e.child(s),g=e.child(a);let w;e.reset(a),e.bind_this(a,i=>v=i,()=>v);var y=e.sibling(a,2),se=e.child(y);let q;e.reset(y),e.bind_this(y,i=>p=i,()=>p);var I=e.sibling(y,2),j=e.child(I);let z;var A=e.sibling(j,2),H=e.child(A),R=e.child(H);e.remove_input_defaults(R);var S=e.sibling(R,2),ie=e.child(S);{var oe=i=>{ve(i)};e.if(ie,i=>{c&&i(oe)})}e.reset(S),e.reset(H);var F=e.sibling(H,2);e.each(F,21,()=>ee,e.index,(i,$,ke,Be)=>{var J=e.derived(()=>e.to_array(e.get($),2));let le=()=>e.get(J)[0],K=()=>e.get(J)[1];var k=be();let N;var ae=e.child(k,!0);e.reset(k),e.template_effect(()=>{N=e.set_class(k,1,"button svelte-nbn1m9",null,N,{active:e.get(d)===K()}),e.set_text(ae,le())}),e.event("click",k,()=>{e.set(d,K(),!0)}),e.append(i,k)}),e.reset(F),e.reset(A),e.reset(I),e.reset(s),e.effect(()=>e.event("focus",s,function(i){e.bubble_event.call(this,n,i)})),e.effect(()=>e.event("blur",s,function(i){e.bubble_event.call(this,n,i)})),e.action(s,(i,$)=>he?.(i,$),()=>te),e.template_effect(()=>{e.set_style(a,`--hue:${x??""}`),w=e.set_style(g,"",w,{transform:`translate(${m[0]??""}px,${m[1]??""}px)`,background:o()}),q=e.set_style(se,"",q,{background:"hsl("+x+", 100%, 50%)",transform:`translateX(${E??""}px)`}),z=e.set_style(j,"",z,{background:o()})}),e.event("mousedown",a,U),e.event("mousedown",y,Q),e.bind_value(R,()=>e.get(P),i=>e.set(P,i)),e.event("change",R,i=>{o(i.currentTarget.value)}),e.event("click",S,Z),e.append(r,s)};e.if(re,r=>{e.get(_)&&r(ne)})}e.template_effect(()=>{M.disabled=n.disabled,Y=e.set_style(M,"",Y,{background:o()})}),e.event("click",M,()=>{G(o()),e.set(_,!e.get(_))}),e.append(u,T),e.pop()}var ye=e.from_html("<!> <!>",1);function Qe(u,n){e.push(n,!0);let o=e.rest_props(n,["$$slots","$$events","$$legacy"]);const t=new ue(o,{value:"#000000"});let _=e.state(e.proxy(t.props.value)),d=e.derived(()=>t.shared.label||t.i18n("color_picker.color_picker"));e.user_effect(()=>{e.get(_)!==t.props.value&&(e.set(_,t.props.value,!0),t.dispatch("change"))}),pe(u,{get visible(){return t.shared.visible},get elem_id(){return t.shared.elem_id},get elem_classes(){return t.shared.elem_classes},get container(){return t.shared.container},get scale(){return t.shared.scale},get min_width(){return t.shared.min_width},children:(c,v)=>{var p=ye(),m=e.first_child(p);me(m,e.spread_props({get autoscroll(){return t.shared.autoscroll},get i18n(){return t.i18n}},()=>t.shared.loading_status,{on_clear_status:()=>t.dispatch("clear_status",t.shared.loading_status)}));var l=e.sibling(m,2);{let f=e.derived(()=>!t.shared.interactive);xe(l,{get label(){return e.get(d)},get info(){return t.props.info},get show_label(){return t.shared.show_label},get disabled(){return e.get(f)},on_input:()=>t.dispatch("input"),on_submit:()=>t.dispatch("submit"),on_blur:()=>t.dispatch("blur"),on_focus:()=>t.dispatch("focus"),get value(){return t.props.value},set value(b){t.props.value=b}})}e.append(c,p)},$$slots:{default:!0}}),e.pop()}export{xe as BaseColorPicker,We as BaseExample,Qe as default};
